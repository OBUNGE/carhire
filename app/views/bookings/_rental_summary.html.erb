<div id="booking_actions_<%= booking.id %>" class="p-4 bg-white rounded border space-y-2">
  <h3 class="font-semibold text-lg">Rental Summary</h3>

  <ul class="space-y-1">
    <li><strong>Days booked:</strong> <%= booking.planned_days %></li>
    <li><strong>Overtime used:</strong> <%= booking.overtime_days %> days</li>
    <li><strong>Total days used:</strong> <%= booking.total_days_used %></li>

    <li>
      <strong>Base rental fee:</strong>
      KES <%= number_with_delimiter(booking.base_rental) %>
      <% if booking.overtime_days.positive? %>
        <span class="text-gray-600">
          (includes overtime charge for <%= booking.overtime_days %> days:
          KES <%= number_with_delimiter(booking.overtime_fee) %>)
        </span>
      <% end %>
    </li>

    <li><strong>Platform commission (10% per day):</strong> KES <%= number_with_delimiter(booking.platform_commission) %></li>
    <li><strong>Owner payout (after commission):</strong> KES <%= number_with_delimiter(booking.owner_payout) %></li>

    <li>
      <strong>Deposit status:</strong>
      <% if booking.deposit_paid_at.present? %>
        ✅ Paid (Receipt: <%= booking.deposit_transaction_id %>) — Payout sent
      <% else %>
        ❌ Not yet paid
      <% end %>
    </li>

    <li>
      <strong>Final payment status:</strong>
      <% if booking.final_paid_at.present? %>
        ✅ Paid (Receipt: <%= booking.final_receipt_number %>) — Payout sent
      <% else %>
        ❌ Not yet paid
      <% end %>
    </li>
  </ul>

  <% if is_owner %>
    <div class="mt-3 flex gap-2">
      <% if booking.deposit_paid_at.present? && booking.status != "completed" %>
        <%= link_to "Customize Bills",
                    edit_invoice_booking_path(booking),
                    data: { turbo_stream: true },
                    class: "px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-500" %>

        <%= button_to "Finalize Invoice",
                      finalize_invoice_booking_path(booking),
                      method: :post,
                      data: { turbo_stream: true },
                      class: "px-3 py-2 bg-green-600 text-white rounded hover:bg-green-500" %>
      <% end %>
    </div>
  <% end %>
</div>
<style>
  /* Simple styles for the rental summary */
  #booking_actions_<%= booking.id %> ul {
    list-style-type: none;
    padding-left: 0;
  }

  #booking_actions_<%= booking.id %> li {
    margin-bottom: 4px;
  }

  #booking_actions_<%= booking.id %> strong {
    display: inline-block;
    width: 180px;
  }

  #booking_actions_<%= booking.id %> .text-gray-600 {
    font-size: 0.9em;
  }

  #booking_actions_<%= booking.id %> .bg-blue-600:hover {
    background-color: #2563eb; /* Darker blue on hover */
  }
  #booking_actions_<%= booking.id %> .bg-green-600:hover {
    background-color: #16a34a; /* Darker green on hover */
  }

</style>